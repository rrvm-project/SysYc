name: Test

on: [push, workflow_dispatch]

jobs:
  test:
    runs-on: self-hosted
    steps:
    - name: get test repo
      uses: actions/checkout@v4
      with:
        repository: ${{ vars.TEST_CLIENT_REPO }}
        token: ${{ secrets.TEST_TOKEN }}

    - name: send test request
      run: cargo run -- -a ${{ secrets.BACKEND_ADDRESS }} -p 12345 -b ${{ github.ref_name }} -c ${{ github.sha }}
